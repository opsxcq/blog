<!doctype html><html lang=en><head><title>How to use Org Mode and Hugo for a better scientific blogging &ndash; STRM</title><meta name=description content="A pro-freedom hacktivist thinktank.
"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.1/css/academicons.min.css integrity="sha512-b1ASx0WHgVFL5ZQhTgiPWX+68KjS38Jk87jg7pe+qC7q9YkEtFq0z7xCglv7qGIs/68d3mAp+StfC8WKC5SSAg==" crossorigin=anonymous><link rel=stylesheet href=https://strm.sh/css/colour/strm-dark.css><link rel=stylesheet href=https://strm.sh/css/colour/dark-mode.css><link rel=stylesheet href=https://strm.sh/css/main.css><link rel=stylesheet href=https://strm.sh/css/custom.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-MP6DVP84T7"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MP6DVP84T7")</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css integrity=sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script></head><body><div class=page><header class=page__header><h1 class=page__logo><a href=https://strm.sh class=page__logo-inner>STRM</a></h1><nav class="page__nav main-nav"><ul><li class=main-nav__item><a class=nav-main-item href=/posts/ title>Posts</a></li><li class=main-nav__item><a class=nav-main-item href=/projects/ title>Projects</a></li><li class=main-nav__item><a class=nav-main-item href=/malware-samples/ title>Malware</a></li><li class=main-nav__item><a class=nav-main-item href=/studies/ title>Studies</a></li><li class=main-nav__item><a class=nav-main-item href=https://github.com/opsxcq/blog/discussions/3>Forum</a></li></ul></nav></header><section class=page__body><header class=content__header><h1>How to use Org Mode and Hugo for a better scientific blogging</h1></header><div class=content__body><p>Small overview on the usage of <code>Org-Mode</code> for blogging leveraging all features
that <code>Emacs</code> can give, as an interactive and literate code development environment
where you have access to bibliographic tools for easy reference and a
comfortable editor.</p><p>The whole stack for being able to archive this:</p><ul><li>Debian Linux or any other distribution</li><li>Emacs</li><li>Spacemacs</li><li>Org-More along with other packages (org-ref, org-roam, etc&mldr;)</li><li>Python environment (poetry, python and Spacemacs layers)</li><li>Git</li><li>Hugo</li><li>Travis and GitHub</li></ul><h2 id=hugo-structure>Hugo Structure</h2><h3 id=summary>Summary</h3><p>Any text at the beginning of the document is considered a summary until it
reaches the max allowed characters or the tag <code>#+hugo: more</code> is found.</p><h3 id=generating-color-schemes-for-syntax-highlight>Generating color schemes for syntax highlight</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo gen chromastyles --style<span style=color:#f92672>=</span>monokoi &gt; themes/strm/static/css/syntax.css
</span></span></code></pre></div><h2 id=spacemacs-configuration>Spacemacs configuration</h2><h3 id=layers>Layers</h3><p>Check out the official <code>Org-Mode</code> layer documentation on Spacemacs for further
reference. Bellow an example</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>     (org :variables
</span></span><span style=display:flex><span>          org-enable-epub-support <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>          org-enable-org-journal-support <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>          org-fontify-whole-heading-line <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>          org-fontify-quote-and-verse-blocks <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>          org-fontify-done-headline <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>          org-pretty-entities <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>          org-projectile-file <span style=color:#e6db74>&#34;projectile.org&#34;</span>
</span></span><span style=display:flex><span>          org-projectile-todo-files <span style=color:#e6db74>&#34;todo.org&#34;</span>
</span></span><span style=display:flex><span>          org-journal-dir <span style=color:#e6db74>&#34;~/studies/journal/&#34;</span>
</span></span><span style=display:flex><span>          org-journal-file-format <span style=color:#e6db74>&#34;%Y-%m-%d&#34;</span>
</span></span><span style=display:flex><span>          org-journal-date-prefix <span style=color:#e6db74>&#34;#+TITLE: &#34;</span>
</span></span><span style=display:flex><span>          org-journal-date-format <span style=color:#e6db74>&#34;%A, %B %d %Y&#34;</span>
</span></span><span style=display:flex><span>          org-journal-time-prefix <span style=color:#e6db74>&#34;* &#34;</span>
</span></span><span style=display:flex><span>          org-journal-time-format <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>          org-babel-python-command <span style=color:#e6db74>&#34;python3&#34;</span>
</span></span><span style=display:flex><span>          org-confirm-babel-evaluate <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>          org-use-property-inheritance <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>          org-enable-roam-support <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>          org-download-image-dir <span style=color:#e6db74>&#34;~/Pictures/org/&#34;</span>
</span></span><span style=display:flex><span>          org-enable-hugo-support <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>          )
</span></span></code></pre></div><p>And append the following to your <code>dotspacemacs-additional-packages</code> to make your
life easier.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>dotspacemacs-additional-packages <span style=color:#f92672>&#39;</span>(
</span></span><span style=display:flex><span>                                  ob-async
</span></span><span style=display:flex><span>                                  ob-go
</span></span><span style=display:flex><span>                                  py-autopep8
</span></span><span style=display:flex><span>                                  (py-docformatter :location (recipe :fetcher github :repo <span style=color:#e6db74>&#34;humitos/py-docformatter.el&#34;</span>))
</span></span><span style=display:flex><span>                                  pyimport
</span></span><span style=display:flex><span>                                  org-roam-bibtex
</span></span><span style=display:flex><span>                                  org-noter
</span></span><span style=display:flex><span>                                  org-noter-pdftools
</span></span><span style=display:flex><span>                                  (org-fragtog :location (recipe :fetcher github :repo <span style=color:#e6db74>&#34;io12/org-fragtog&#34;</span>))
</span></span><span style=display:flex><span>                                  )
</span></span></code></pre></div><h3 id=general-writing-tips>General Writing tips</h3><p><code>Write-room</code> mode will improve your focus by removing everything else from the
screen and centering your buffer, use with <code>SPC w C C</code>. More focus can be obtained
with <code>org-narrow-to-subtree</code> which will remove everything else from the document
except the current sub-tree, there are a few alternatives:</p><ul><li><code>, s n</code> : org narrow to sub-tree</li><li><code>SPC n w</code>: widen back to normal</li><li><code>, '</code> : open a source code block to be edited on the specialized editor.</li><li><code>SPC S l</code> : Enable and use <code>langtool</code></li></ul><p>You can use <a href=https://alldocs.app/convert-markdown-to-emacs-org-mode>this site</a> to easily convert from <code>markdown</code> to <code>Org-Mode</code>.</p><h3 id=auto-export-on-save>Auto Export on save</h3><h3 id=langtool>Langtool</h3><h3 id=bibtex-references>Bibtex references</h3><p>References are handled by <code>org-ref</code>, they are exported from <code>Zotero</code> and <code>Calibre</code>,
for papers and books respectively. To make sure that they will be reachable add
to the section of the document which you want to have the section <code>bibliography</code>
rendered the following piece of text:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>bibliography:../../library.bib,../../references.bib
</span></span></code></pre></div><p>Remember that this is a relative path from your document to the project&rsquo;s root.
After this is done, references can be added with the key combination <code>SPC m i c</code>.</p><p>A paper reference will look like this ((<a href=#citeproc_bib_item_2>Diffie and Hellman 1976</a>)) while a book
reference will be rendered like this ((<a href=#citeproc_bib_item_1>Broedel 2003</a>)).</p><h3 id=footnotes>footnotes</h3><p>Sometimes the text gets too clumsy and some explanations are not required for
some reader, but are for others <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> , to add a footnote use <code>, i f.</code></p><h2 id=math-and-latex>Math and LaTeX</h2><p><em>LaTeX</em> is rendered using <code>Katex</code> if <code>math</code> variable is set to <code>true</code> on page or site
level. On emacs inline <em>LaTeX</em> rendering can be achieved using <a href=https://github.com/io12/org-fragtog>org-fragtog</a> .</p><p>Not all functions are supported, take a look at <a href=https://katex.org/docs/supported.html>Katex limitations</a> to check it
out before using. Also, if an expression or function is not supported, with
Emacs you can directly export the <code>png</code> file which is automatically generated.</p><p>Here some inline expression \(a^2=b\) and \( b=2 \), then the solution must be
either \[ a=+\sqrt{2} \] or \[ a=-\sqrt{2} \]</p><p>Here a multi-line example using Nash Equilibrium to illustrate:</p><p>\[
u_i(s_i^*, s_{-i}^*) \geq u_i(s_i, s_{-i}^*) \;\;{\rm for \; all}\;\; s_i \in S_i
\]</p><h2 id=literate-programming>Literate programming</h2><p>One of the greatest advantages of using <code>Org-Mode</code> for writing documents is
leveraging of <a href=https://en.wikipedia.org/wiki/Literate_programming>literate programming</a> to write a more reproducible research, along
with features like <a href=https://orgmode.org/manual/Extracting-Source-Code.html>Tangle</a> which allows you to extract source from your documents.</p><p>Comparing it with alternatives like <code>Jupyter</code> you have all the advantages of your
keybindings, I for example use <code>Vim</code> keybindings on <code>Emacs</code>, being able to use
several programming environments, references, a brain dump if you use
<code>Org-Roam</code>. Along with it, you can start sessions and jump right to it, separate
your sessions, so your variables don&rsquo;t get messed up.</p><p><code>Org</code> files work better with <code>Git</code> in general, so version control is much easier.
<code>Emacs</code> supports <code>Jupyter</code> and <code>IPython</code>, but given the power of <code>Org-Mode</code> simply using
<code>Python</code> you can archive everything and more.</p><p>One thing that is lost is the capability of having inline <code>Plotly</code> plots, which
are interactive due to the usage of web technology. But if you are executing
<code>Emacs</code> on your desktop you can still use it and plots will open in a browser.</p><p>This makes <code>Org-Mode</code> quite superior to any other environment of interactive
development and for a local user which can leverage even further of <code>Bibtex</code>,
<code>Org-Roam</code> and all babel executors there is no other alternative with such power.</p><h3 id=python-and-plots>Python and Plots</h3><p>The given code bellow is a demonstration of the usage of Python.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> seaborn <span style=color:#66d9ef>as</span> sns
</span></span><span style=display:flex><span>sns<span style=color:#f92672>.</span>set_theme(style<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ticks&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dots <span style=color:#f92672>=</span> sns<span style=color:#f92672>.</span>load_dataset(<span style=color:#e6db74>&#34;dots&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Define the palette as a list to specify exact values</span>
</span></span><span style=display:flex><span>palette <span style=color:#f92672>=</span> sns<span style=color:#f92672>.</span>color_palette(<span style=color:#e6db74>&#34;rocket_r&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Plot the lines on two facets</span>
</span></span><span style=display:flex><span>sns<span style=color:#f92672>.</span>relplot(
</span></span><span style=display:flex><span>    data<span style=color:#f92672>=</span>dots,
</span></span><span style=display:flex><span>    x<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;time&#34;</span>, y<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;firing_rate&#34;</span>,
</span></span><span style=display:flex><span>    hue<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;coherence&#34;</span>, size<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;choice&#34;</span>, col<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;align&#34;</span>,
</span></span><span style=display:flex><span>    kind<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;line&#34;</span>, size_order<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;T1&#34;</span>, <span style=color:#e6db74>&#34;T2&#34;</span>], palette<span style=color:#f92672>=</span>palette,
</span></span><span style=display:flex><span>    height<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>, aspect<span style=color:#f92672>=</span><span style=color:#ae81ff>.75</span>, facet_kws<span style=color:#f92672>=</span>dict(sharex<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>),
</span></span><span style=display:flex><span>)<span style=color:#f92672>.</span>savefig(<span style=color:#e6db74>&#39;./demo-plot.png&#39;</span>)
</span></span></code></pre></div><figure><img src=/ox-hugo/demo-plot.png></figure><p>If the image above is not displayed in your <code>Emacs</code> use <code>org-toggle-inline-images</code>
with the shortcut <code>, T i</code>.</p><h3 id=org-mode-tweaks>Org Mode tweaks</h3><p>To avoid re-evaluating the code every time that it is exported, add the
following property at the beginning of the document.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>#+PROPERTY: header-args :eval never-export
</span></span></code></pre></div><h2 id=org-mode-examples>Org Mode examples</h2><p>Bellow just some random <code>Org-Mode</code> markup to show how it renders.</p><blockquote><p>To buy books would be a good thing if we could also buy the time to read them;
but the purchase of books is often mistaken for the assimilation and mastering
of their contents. &ndash; Arthur Schopenhauer</p></blockquote><p>Some inline styling: <code>Verbatim</code> <strong>bold</strong> <em>italic</em></p><p>Table rendering:</p><table><thead><tr><th>A</th><th>b</th><th>c</th><th>d</th><th>e</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>3</td><td>1</td><td>2</td></tr><tr><td>1</td><td>1</td><td>3</td><td>1</td><td>2</td></tr><tr><td>1</td><td>1</td><td>3</td><td>1</td><td>2</td></tr><tr><td>1</td><td>1</td><td>3</td><td>1</td><td>2</td></tr><tr><td>1</td><td>1</td><td>3</td><td>1</td><td>2</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Example
</span></span></code></pre></div><h2 id=including-external-content>Including external content</h2><p><code>Hugo</code> offers what is called <code>shortcodes</code>, which are mere functions which wrap a
more elaborated rendering pipeline of data. Bellow some examples how to include
external content using <code>shortcodes</code>.</p><p>The <code>shortcodes</code> have to be wrapped around double <code>@@ .. @@</code>, when using a
markdown <code>shortcode</code>, include the prefix <code>md:</code> before the actual code.</p><h3 id=twitter>Twitter</h3><p>Using the <code>shortcode</code> bellow is possible to render a tweet:</p><p>{{&lt; tweet user=&ldquo;officialmcafee&rdquo; id=&ldquo;1405918427663982594&rdquo; >}}</p><blockquote class=twitter-tweet data-dnt=true><p lang=en dir=ltr>In a democracy, power is given not taken.<br><br>But it is still power.<br><br>Love, compassion, caring have no use for it. But it is fuel for greed, hostility,  jealousy...<br><br>All power corrupts.<br><br>Take care which powers you allow a democracy to wield.</p>&mdash; John McAfee (@officialmcafee) <a href="https://twitter.com/officialmcafee/status/1405918427663982594?ref_src=twsrc%5Etfw">June 18, 2021</a></blockquote><h3 id=gist>Gist</h3><p>Same applies for a <code>Gist</code> from <code>GitHub</code>:</p><p>{{&lt; gist opsxcq f5b3ba08f45d70f998a4cc8a25bf57a3 >}}</p><script type=application/javascript src=https://gist.github.com/opsxcq/f5b3ba08f45d70f998a4cc8a25bf57a3.js></script><h3 id=youtube>YouTube</h3><p>The inclusion of external videos is also possible</p><p>{{&lt; youtube pctYu1Wz514 >}}</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube-nocookie.com/embed/pctYu1Wz514 style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h2 id=templates>Templates</h2><h3 id=posts>Posts</h3><h3 id=studies>Studies</h3><h3 id=projects>Projects</h3><h3 id=malware>Malware</h3><h2 id=references>References</h2><div class=csl-bib-body><div class=csl-entry><a id=citeproc_bib_item_1></a>Broedel, Hans Peter. 2003. <i>The Malleus Maleficarum and the Construction of Witchcraft</i>. Vol. 1. Manchester University Press.</div><div class=csl-entry><a id=citeproc_bib_item_2></a>Diffie, Whitfield, and Martin Hellman. 1976. “New Directions in Cryptography.” <i>Ieee Transactions on Information Theory</i> 22 (6): 644–54.</div></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Not everyone is equal&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=content__footer></footer><script src=https://utteranc.es/client.js repo=opsxcq/blog issue-term=title label=comment theme=dark-blue crossorigin=anonymous async></script></section><section class=page__aside><div class=aside__about><div class=aside__about><h1 class=about__title>## STRM ##</h1><p class=about__description>A pro-freedom hacktivist thinktank.</p></div><ul class=aside__social-links><li><a href=https://github.com/opsxcq/blog rel=me aria-label=GitHub title=GitHub><i class="fab fa-github" aria-hidden=true></i></a>&nbsp;</li><li><a href=mailto:trash-can@strm.sh rel=me aria-label=Email title=Email><i class="fas fa-envelope" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://keybase.io/terminator rel=me aria-label="Keybase OPSXCQ" title="Keybase OPSXCQ"><i class="fab fa-keybase" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://keybase.io/team/cryptoanarquismo rel=me aria-label="Keybase Crypto" title="Keybase Crypto"><i class="fas fa-users" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://keybase.io/team/deepweb rel=me aria-label="Keybase Deep Web" title="Keybase Deep Web"><i class="fas fa-users" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://github.com/opsxcq/blog/discussions/3 rel=me aria-label=Forum title=Forum><i class="fas fa-users" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://gitter.im/strm-blog/community rel=me aria-label=Gitter title=Gitter><i class="fab fa-gitter" aria-hidden=true></i></a>&nbsp;</li></ul></div><hr><div class=aside__content><p>By [OPSXCQ],
2022-01-15</p><nav id=TableOfContents><ul><li><a href=#hugo-structure>Hugo Structure</a><ul><li><a href=#summary>Summary</a></li><li><a href=#generating-color-schemes-for-syntax-highlight>Generating color schemes for syntax highlight</a></li></ul></li><li><a href=#spacemacs-configuration>Spacemacs configuration</a><ul><li><a href=#layers>Layers</a></li><li><a href=#general-writing-tips>General Writing tips</a></li><li><a href=#auto-export-on-save>Auto Export on save</a></li><li><a href=#langtool>Langtool</a></li><li><a href=#bibtex-references>Bibtex references</a></li><li><a href=#footnotes>footnotes</a></li></ul></li><li><a href=#math-and-latex>Math and LaTeX</a></li><li><a href=#literate-programming>Literate programming</a><ul><li><a href=#python-and-plots>Python and Plots</a></li><li><a href=#org-mode-tweaks>Org Mode tweaks</a></li></ul></li><li><a href=#org-mode-examples>Org Mode examples</a></li><li><a href=#including-external-content>Including external content</a><ul><li><a href=#twitter>Twitter</a></li><li><a href=#gist>Gist</a></li><li><a href=#youtube>YouTube</a></li></ul></li><li><a href=#templates>Templates</a><ul><li><a href=#posts>Posts</a></li><li><a href=#studies>Studies</a></li><li><a href=#projects>Projects</a></li><li><a href=#malware>Malware</a></li></ul></li><li><a href=#references>References</a></li></ul></nav></div></section><footer class=page__footer><p class=copyright>STRM</p><p class=advertisement>Powered by <a href=https://github.com/opsxcq/blog>Open Source</a></p></footer></div></body></html>